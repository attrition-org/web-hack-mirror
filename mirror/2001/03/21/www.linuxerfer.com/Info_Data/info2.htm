<HTML>
<HEAD>
 <TITLE>Linuxerfer.Com</TITLE>
<META content="text/html; charset=EUC-KR" http-equiv=Content-Type>
<STYLE type=text/css>
A:link { TEXT-DECORATION: none }
A:visited {TEXT-DECORATION: none}
A:active {TEXT-DECORATION: none}
A:hover {TEXT-DECORATION: underline}
BODY {FONT-SIZE: 10pt}
TD {FONT-SIZE: 10pt}
</STYLE>

</HEAD>

<BODY bgColor=#ffffff text=#111111 link=#000000 aLink=#222222 vLink=#333333>

<TABLE align=center bgColor=#ffffff border=0 cellPadding=0 cellSpacing=0 width=670>
<TR>
 <TD height="1"></TD>
 <TD></TD>
 <TD></TD>
 <TD></TD>
 <TD align=right>
  <FONT color=#111111>Linuxerfer.Com</FONT>&nbsp;&nbsp;</TD>
 <TD bgColor=#000000 height="7" width="1">
  <img src="image/empty.gif" width=1></TD>
 <TD></TD>
</TR>
<TR>
 <TD></TD>
 <TD bgColor=#000000 height="7">
  <img src="image/empty.gif" width=1></TD>
 <TD></TD>
 <TD></TD>
 <TD></TD>
 <TD bgColor=#000000 height="7">
  <img src="image/empty.gif" width=1></TD>
 <TD></TD>
</TR>
<TR>
 <TD bgColor=#000000 colSpan=7 height=1>
  <img src="image/empty.gif" height=1 width=100%></TD>
</TR>
<TR>
 <TD></TD>
 <TD bgColor=#000000 height=1>
  <img src="image/empty.gif" width=1></TD>
 <TD bgColor=#e1e1e1 vAlign=top width=140>
 <!-- ----------------------------- 메  뉴 --------------------------------- -->

 <TABLE border=0 cellPadding=0 cellSpacing=5 width="100%">
 <TR>
  <TD>
   <FONT color=#111111><B>Contents</B></FONT>
  </TD>
 </TR>
 <TR>
  <TD bgColor=#000000 height=1 width=1>
   <img src="image/empty.gif" width=1></TD>
 </TR>
 <TR>
  <TD>
   <font color="#FFCC99"><a href="#Summary">Summary</a></font><P>
   <font color="#FFCC99"><a href="#Compiler">Compiler</a></font><P>
   <font color="#FFCC99"><a href="#System">System</a></font><P>
   <font color="#FFCC99"><a href="#Apache">Apache</a></font><P>
   <font color="#FFCC99"><a href="#Samba">Samba</a></font><P>
   <font color="#FFCC99"><a href="#Kernel">Kernel</a></font><P>
  </TD>
 </TR>
 </TABLE>


 <!-- ------------------------- END 메 뉴 --------------------------------- -->

 </TD>

 <TD bgColor=#000000 height=1 width=1>
  <img src="image/empty.gif" width=1></TD>
 <TD bgColor=#f1f1f1 align=right vAlign=top width=530>

 <!-- ----------------------------- 본  문 --------------------------------- -->
 <TABLE border=0 cellPadding=0 cellSpacing=0 width="100%">
 <TR>
  <TD width=365 align=left bgColor=#e1e1e1 vAlign=middle>
   <FONT color=#111111><B>&nbsp;&nbsp;Linux Server Performance Checklist</B></FONT></TD>
  <TD bgColor=#000000 height=25 width=1>
   <img src="image/empty.gif" width=1></TD>
  <TD width=165></TD>
 </TR>
 <TR>
  <TD bgColor=#000000 colSpan=2 height=1 width=1>
   <img src="image/empty.gif" width=1></TD>
  <TD></TD>
 </TR>
 </TABLE>
 <P>

 <TABLE border=0 cellPadding=0 cellSpacing=10 width="100%">
 <TR>
  <TD>
   <img src="../image/dot.gif" align=middle>
   <a name="Summary"></a>
   <B>Summary</B><P>
    The goal of this site is to provide <i>practical</i> assistance in Linux
    server performance tuning in the fewest possible words.  If you go though
    this list, and check off each item as you apply it, you should end up with
    close to the fastest performance possible on <i>your</i> hardware under
    Linux.  If you are benchmarking and find any platform that performs
    significantly better than
    <a href="http://www.linux.com">Lin</a><a href="http://www.linux.org">ux</a>
    in <i>any</i> meaningful benchmark, even <b>after</b> tuning your system
    using this checklist, <i>please</i> let
    <a href="mailto:jageorge@att.net">me</a> know <b>before</b> you publish
    your results. Most likely I simply forgot to mention something relevant to
    your particular benchmark. Thanks!<P>


   <img src="../image/dot.gif" align=middle>
   <a name="Compiler"></a>
   <B>Compiler</B><P>
    Latest and best for the target platform
    <ul><li>
    <a href="http://www.gcc.za.org/">PGCC</a>
    1.1.3 for x86 [be sure the use the	
    <a href="http://www.gcc.za.org/pgcc-faq.html#SEC04">
    optimization information</a>]
    </li>

    <li>
    <a href="http://egcs.cygnus.com/">EGCS</a>
    1.1.2 for non-x86 [soon to be succeeded by
    <a href="http://egcs.cygnus.com/gcc-2.95/gcc-2.95.html">GCC</a> 2.95]</li>
    </ul>

    Best optimization options for the target platform and compiler
    <ul>
    <li>
    Example for Intel Pentium II
    using <a href="http://www.gcc.za.org/">PGCC</a>:
    <br>
    <tt>CFLAGS="-mcpu=pentiumpro -march=pentiumpro -O6 -fno-exceptions"</tt>
    </li>
    </ul><P>


   <img src="../image/dot.gif" align=middle>
   <a name="System"></a>
   <B>System</B><P>
    Disable all automatic power management features in the system BIOS.<P>
    Disable all unused services and daemons especially network related services.<P>
    Lower the priorities of non-critical tasks and daemons using nice and renice.<P>

    Use <tt>irqtune</tt> to prioritize your devices.<P>
    <ul>example:
    <ul><tt>irqtune 5 11</tt></ul>
    <br>where:
    <ul>5 = ethernet NIC</ul>
    <ul>11 = SCSI host controller</ul></ul><P>

    Use <tt>hdparm</tt> to configure hard drive options.<P>
    <ul><li>Filesystem read ahead count</li>
    <li>Drive look ahead</li>
    <li>Drive write cache</li>
    <li>Drive multi-sector access</li>
    <li>Drive look ahead prefetch count</li>
    <li>OS irq unmask</li>
    <li>Controller 32 bit access</li></ul><P>


   <img src="../image/dot.gif" align=middle>
   <a name="Apache"></a>
   <B>Apache</B><P>
    Get the latest stable <a href="http://www.apache.org/dist/">Apache source</a> currently 1.3.6.<P>

    Set up to compile as specified in the Compiler section.<P>

    <li>Add <tt><b>AddModule modules/mod_mmap_static.o</b></tt> to the
    <tt><b>Configuration</b></tt> file.</li> <br>
    <li>List the static pages in <tt><b>/www/conf/mmap.conf</b></tt>.</li><P>

    Compile with <tt><b>-DDYNAMIC_MODULE_LIMIT=0</b></tt> unless you <b>need</b> dynamic modules.<P>
    Core content [for example index.html and its images] should be on a kernel RAM disk.<P>
    Dynamic content files should be processed on a kernel RAM disk.<P>
    Set <i>FollowSymLinks</i> option unless you <b>really don't</b> want it.<P>
    Set <i>AllowOverride</i> to <i><u>None</u></i> unless you <b>really do</b> need it.<P>
    <b>Explicitly</b> list all <i>DirectoryIndex</i> file options from most to least commonly used.<P>
    Tune <i>KeepAliveTimeout</i> starting with <tt><b>3</b></tt> ranging to <tt><b>30</b></tt> per content and connection types.<P>
    Tune <i>StartServers</i> starting with <tt></b>64</b></tt> increasing in steps of <tt><b>32</b></tt> until performs drops off.<P>
    Tune <i>Max Clients</i> starting with the value of <i>StartServers</i>.<br>
    NOTE: Scaling performance can fall off <b>dramatically</b> if <i>Max Clients</i> is too large!<P>
    For SMP boxes listening on a single socket try recompiling after defining <i><u>SINGLE_LISTEN_UNSERIALIZED_ACCEPT</u></i>.<P>
    Use the <a href="http://www.apache.org/">Apache</a> HTTP server <a href="http://www.apache.org/docs/misc/perf-tuning.html"> optimization information</a>.<P>


   <img src="../image/dot.gif" align=middle>
   <a name="Samba"></a>
   <B>Samba</B><P>
    Get the latest stable <a href="http://us1.samba.org/samba/download.html">Samba source</a> currently 2.0.4.<P>
    Set up to compile as specified in the Compiler section.<P>
    Use the <a href="http://us1.samba.org/samba/samba.html">Samba</a> SMB Windows share server <a href="http://us1.samba.org/samba/ftp/docs/textdocs/Speed.txt"> optimization information</a>.<P>


   <img src="../image/dot.gif" align=middle>
   <a name="Kernel"></a>
   <B>Kernel</B><P>
    Get the latest stable <a href="http://www.kernel.org/">Linux kernel source</a> currently 2.2.9.<P>
    Add the <a href="ftp://ftp.suse.com/pub/people/andrea/kernel/2.2.9_andrea3.bz2"> wake one</a> patch for improved poll/select performance on massive systems.<P>
    Set up to compile as specified in the Compiler section.<P>
    Create a customized monolithic kernel tuned to your hardware.
    <br><tt>cd /usr/src/linux; make xconfig</tt>
    <ul>
     <li> Set <tt><b>Processor family</b></tt> to PPro/6x86MX for Pentium II/III systems. </li>
     <li> Enable <tt><b>MTRR</b></tt> for PentiumPro/II/III and newer AMD K6-2/3 systems. </li>
     <li> Only enable <tt><b>Symmetric multiprocessing</b></tt> if you are using a multiprocessor box.  </li>
     <li> Disable <tt><b>Advanced Power Management</b></tt> if you are running a server configuration.  </li>
     <li> Disable <tt><b>chipset/bugfix support</b></tt> for all chipsets you DON'T have.  <br> Example: CMD640 and RZ1000 </li>
     <li> Enable <tt><b>Generic PCI bus-master DMA support</b></tt> and <tt><b>Use DMA by default</b></tt> </li>
     <li> Enable any custom support for chipsets you DO have.  <br> Example: VIA82C586 for VIA VP2/3 and MVP3 motherboards. </li>
     <li> Enable <tt><b>RAID-0 (striping)</b></tt> if you have multiple identical disks. </li>
     <li> Disable <tt><b>Kernel/User netlink socket</b></tt> </li>
     <li> Enable only the SCSI device types you actually have.  <br> Example: SCSI disk, but not tape/CD-ROM/generic </li>
     <li> Disable <tt><b>Probe all LUNs</b></tt> unless you need it. </li>
     <li> Disable <tt><b>Verbose SCSI error reporting</b></tt> </li>
     <li> Disable <tt><b>SCSI logging facility</b></tt> </li>
     <li> Enable ONLY the specific SCSI controller you have.  <br> Example: Adaptec AIC7xxx </li>
     <li> Test and Tune the <tt><b>Maximum number of commands per LUN</b></tt> </li>
     <li> Disable ALL <tt><b>Network device support</b></tt> that you don't strictly require.  </li>
     <li> Set the <tt><b>Maximum number of Unix98 PTYs</b></tt> to 128 </li>
     <li> Disable <tt><b>Watchdog Timer Support</b></tt> </li>
     <li> Disable all <tt><b>Filesystems</b></tt> <br> EXCEPT: <tt><b>ISO 9660 CDROM</b></tt>, <tt><b>Second extended fs</b></tt>, <tt><b>/dev/pts</b></tt>, and <tt><b>/proc</b></tt> support. </li>
     <li> Disable all <tt><b>Network File Systems</b></tt> <br> EXCEPT: <tt><b>NFS server support</b></tt> and <tt><b>#undef NFS_PARANOIA</b></tt> </li>
     <li> Disable all <tt><b>Console drivers</b></tt> <br> EXCEPT: <tt><b>VGA text console</b></tt> </li> 
     <li> Disable <tt><b>Enhanced Real Time Clock Support</b></tt> </li>
     <li> Disable all non-essential serial and mouse device support. </li>
     <li> Disable all <tt><b>Video for Linux</b></tt> </li>
     <li> Disable all <tt><b>non-SCSI/IDE/ATAPI CD-ROMs</b></tt> </li>
     <li> Disable all <tt><b>ISDN</b></tt> </li>
     <li> Disable all <tt><b>Plug and Play</b></tt> </li>
     <li> Disable all <tt><b>Amateur Radio</b></tt> </li>
     <li> Disable all <tt><b>Loadable modules</b></tt> </li>
     <li> Disable all <tt><b>IrDA subsystem</b></tt> </li>
     <li> Disable all <tt><b>Joysticks</b></tt> </li>
     <li> Disable all <tt><b>Ftape</b></tt> </li>
     <li> Disable all <tt><b>Partition Types</b></tt> </li>
     <li> Disable all <tt><b>Native Language Support</b></tt> </li>
     <li> Disable all <tt><b>Sound cards</b></tt> </li>
    </ul>

    IMPORTANT!  See <tt>/usr/src/linux/net/TUNABLE</tt> for network tuning.<P>
    ???  Does anyone have specific advice for network device tuning ???<P>

   </TD>
 </TR>
 </TABLE>

 <P ALIGN=RIGHT>
 출처 : http://home.att.net/~jageorge/performance.html &nbsp;&nbsp;</P>

 <P>
 </TD>

<!-- ----------------------------- 꼬리말  -------------------------------- -->
 <TD bgColor=#000000 height=1 width=1>
  <img src="image/empty.gif" width=1></TD>
 <TD height=1 width=7></TD>
</TR>
<TR>
 <TD bgColor=#000000 colSpan=7 height=1 width=1>
  <img src="image/empty.gif" width=1></TD>
</TR>
<TR>
 <TD height=1 width=7></TD>
 <TD bgColor=#000000 height=7 width=1>
  <img src="image/empty.gif" width=1></TD>
 <TD colspan=3></TD>
 <TD bgColor=#000000 height=7 width=1>
  <img src="image/empty.gif" width=1></TD>
 <TD height=1 width=7></TD>
</TR>
<TR>
 <TD height=1 width=7></TD>
 <TD bgColor=#000000 height=7 width=1>
  <img src="image/empty.gif" width=1></TD>
 <TD vAlign=top>&nbsp;&copy;Linuxerfer.com<BR></TD>
 <TD colspan=3 align=right><TT>2000/09/22</TT> <BR></TD>
 <TD></TD>
</TR>
</TABLE>
<P></P>
</BODY>
</HTML>
